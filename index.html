<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Recycling POS</title>
<style>
  :root{
    --bg:#070c16; --bg2:#0b1320; --card:#0f1730; --muted:#8ca0c3;
    --accent:#7dd3fc; --ok:#22c55e; --danger:#ef4444; --ink:#e5efff;
    --border:#22314f33;
  }
  [data-theme="light"]{
    --bg:#f7fafc; --bg2:#eef2f7; --card:#ffffff; --muted:#5b6b83;
    --accent:#0ea5e9; --ok:#16a34a; --danger:#dc2626; --ink:#0b1320;
    --border:#d7e0ee;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;color:var(--ink);
    background:radial-gradient(80vw 80vh at 10% 10%, #0f1f3d 0%, var(--bg) 60%),
               linear-gradient(180deg, var(--bg2), var(--bg) 60%);
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",sans-serif;
    padding-bottom:env(safe-area-inset-bottom);
  }
  .hidden{display:none!important}
  .row{display:flex; gap:10px; flex-wrap:wrap}
  .pill{background:color-mix(in oklab, var(--card) 70%, #0f1a2d); border:1px solid var(--border); border-radius:999px; padding:6px 10px; white-space:nowrap}
  .btn{padding:12px 16px; cursor:pointer; transition:transform .06s ease, filter .2s ease; font:inherit; border-radius:12px; border:1px solid var(--border); background:color-mix(in oklab, var(--card) 90%, #0e1b30 14%); color:var(--ink)}
  .btn:active{transform:translateY(1px)}
  .btn.primary{background:color-mix(in oklab, var(--accent) 14%, var(--card)); border-color:var(--border)}
  .btn.success{background:var(--ok); border-color:#16a34a; color:#05210f}
  .btn.danger{background:var(--danger); border-color:#b91c1c}
  .btn[disabled]{opacity:.6; cursor:not-allowed}
  input,textarea{font:inherit; border-radius:12px; border:1px solid var(--border); background:color-mix(in oklab, var(--card) 92%, #0e1b30 14%); color:var(--ink); padding:12px}
  input[type=number]{text-align:center}

  .wrap{max-width:960px; margin:0 auto; padding:14px}
  header{display:flex; gap:10px; align-items:center; justify-content:space-between}
  .badge{font-size:.72rem; color:var(--bg2); background:var(--accent); padding:4px 8px; border-radius:999px; font-weight:700}
  .card{background:var(--card); border:1px solid var(--border); border-radius:16px; padding:12px}
  table{width:100%; border-collapse:collapse}
  th,td{padding:10px; border-bottom:1px solid var(--border); text-align:left}
  .pricecell{white-space:nowrap}
  .sticky-bottom{position:sticky; bottom:0; background:linear-gradient(180deg,transparent,var(--bg2) 24%); padding-top:6px}
  .grid{display:grid; grid-template-columns:repeat(auto-fill,minmax(110px,1fr)); gap:10px}
  .mat-btn{display:flex; flex-direction:column; gap:6px; align-items:center; justify-content:center; background:color-mix(in oklab, var(--card) 92%, #0e1b3020); border:1px solid var(--border); border-radius:14px; padding:10px; min-height:104px; transition:transform .08s ease, box-shadow .2s ease}
  .mat-btn:hover{transform:translateY(-2px); box-shadow:0 8px 20px rgba(0,0,0,.15)}
  .mat-btn svg{width:40px; height:40px}
  .mat-btn span{font-size:.8rem; text-align:center}
  .fab{position:fixed; right:16px; bottom:16px; width:56px; height:56px; border-radius:999px; background:color-mix(in oklab, var(--card) 80%, #1f2b45); border:1px solid #2a3e6633; display:none; align-items:center; justify-content:center; box-shadow:0 8px 24px rgba(0,0,0,.20)}

  @media (max-width:420px){
    header .row{gap:6px}
    .btn{padding:10px 12px}
    .grid{grid-template-columns:repeat(3,1fr)}
  }

  @supports (-webkit-touch-callout: none) {
    @media screen and (device-width:430px) and (device-height:932px) and (-webkit-device-pixel-ratio:3) {
      .wrap{padding:12px}
      .btn{padding:14px 16px}
      .grid{grid-template-columns:repeat(4,1fr)}
      .mat-btn{min-height:112px}
      header .row{gap:6px}
      body{padding-bottom:calc(env(safe-area-inset-bottom) + 8px)}
    }
  }

  /* AUTH SCREEN */
  #authScreen{
    position:fixed; inset:0; display:flex; align-items:center; justify-content:center;
    padding:24px;
    background:radial-gradient(60vw 60vh at 20% 10%, #112346aa 0%, rgba(0,0,0,0.92) 60%);
    z-index:100;
  }
  .auth-card{
    width:min(420px, 96vw);
    background:color-mix(in oklab, var(--card) 80%, #000000dd);
    backdrop-filter: blur(10px);
    border:1px solid var(--border);
    border-radius:18px;
    padding:18px;
    box-shadow:0 20px 80px rgba(0,0,0,.40)
  }
  .title{display:flex; align-items:center; gap:10px; margin:0 0 8px}
  .title .dot{width:12px; height:12px; border-radius:999px; background:var(--accent); box-shadow:0 0 16px color-mix(in oklab, var(--accent) 60%, white)}
  .subtitle{color:var(--muted); margin:0 0 12px}
  .hint{color:var(--muted); font-size:.9rem; min-height:1.2em}
</style>

<!-- QR / scanner libs -->
<script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@zxing/library@0.20.0/umd/index.min.js"></script>

<!-- Firebase compat -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
</head>
<body>

<!-- AUTH -->
<div id="authScreen">
  <div class="auth-card">
    <div class="title">
      <span class="dot"></span>
      <h1 style="margin:0;font-size:1.6rem">Login</h1>
    </div>
    <p class="subtitle">Sign in with the admin account to use POS.</p>
    <div
